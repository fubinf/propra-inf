title: Aufgaben abgeben können mit Git
description: |
  Versionsverwaltung einrichten und grundlegende Git-Kommandos kennenlernen
timevalue: 1.0
difficulty: 1
---

[SECTION::goal::product]

- Allererste Kenntnisse über die Git-Versionsverwaltung erwerben
- Die technischen Voraussetzungen dafür schaffen, bearbeitete Aufgaben bei
  der Tutor_in einreichen zu können

[ENDSECTION]
[SECTION::background::default]

### Git? Was soll das?

Hier geht es um das Versionsverwaltungssystem Git (oft auch klein geschrieben: git);
auf Englisch version control system oder kurs VCS; meistens einfach "git" genannt.
Ein Versionsverwaltungssystem verwaltet Dateien, an denen im Laufe der Zeit 
Änderungen gemacht werden, und speichert viele solche Versionen
samt der Angabe, wer sie wann erzeugt hat.

Das VCS ist _das_ zentrale Werkzeug für die Softwareentwicklung im Team:
Andere Teammitglieder können sich jederzeit die jüngsten Änderungen aller
anderen aus dem VCS holen, sie eventuell prüfen, und dann übernehmen (das ist der Normalfall)
oder auch nicht. 
Auf diese Weise können alle zusammenarbeiten, ohne sich dabei nennenswert gegenseitig unterbrechen
zu müssen.

Ähnlich hier im ProPra: Sie müssen alle ihre Einreichungen in einem Git **"repository"**
(so heißt die Versionsablage für ein Projekt; kurz meist **"repo"**) speichern, 
wenn Sie sie einer Tutor_in vorlegen möchten.
Die Tutor_in ruft ihre Abgabe vom Git-Server ab, prüft sie und speichert dann
das Prüfergebnis auch wieder in Ihrem Git-Repository.

Der Server dient dabei nur zum Übermitteln von einer Benutzer_in zur anderen,
alles andere passiert lokal auf dem eigenen Rechner.
Deshalb braucht jede_r, der mit einem Git-Repository arbeitet, eine Kopie des Repositorys
auf dem eigenen Rechner.


### Wie benutzt man Git?

Git ist ein Kommandozeilenprogramm. 
Es gibt auch GUIs (separat und in Entwicklungsumgebungen), die die Verwendung der
wichtigsten Kommandos erleichtern, aber um Git richtig zu verstehen und um seine
fortgeschrittenen Funktionen zu nutzen, braucht man die Kommandozeile.

[WARNING]
Git ist extrem leistungsfähig, aber es kommt oft auf Details an.
Bitte sorgfältig lesen und arbeiten, sonst kann es schnell frustrierend werden.
[ENDWARNING]

Für den Server nutzt man entweder einen öffentlichen Dienst wie 
[GitHub](https://github.com/),
[GitLab](https://about.gitlab.com/) oder
[BitBucket](https://bitbucket.org/),
oder man betreibt selbst eine Serversoftware wie 
[GitLab](https://about.gitlab.com/) oder
[Gitea](https://about.gitea.com/).

<replacement id="Git101WillUseGitServer">
Wir werden einen GitLab-Server benutzen, den der Fachbereich Mathematik und Informatik betreibt:
[git.imp.fu-berlin.de](https://git.imp.fu-berlin.de/).
</replacement>

Hier gibt es nur reines Bedienwissen für die Einreichung von Aufgabenergebnissen;
das Verständnis dazu und alles Weitere lernen Sie später im Kapitel über Werkzeuge.
Die Aufgabenblöcke (vor allem der erste) zu Git gehören zum Wertvollsten, was Sie aus dem
ProPra mitnehmen können; lassen Sie sich diese Aufgaben bitte nicht entgehen!

Wir bearbeiten jetzt folgendes:

- Installieren und Konfigurieren von Git auf Ihrem System.
- Einrichten und Konfigurieren Ihres persönlichen ProPra-Git-Repositorys zum Einreichen Ihrer ProPra-Abgaben.
- Anlegen der lokalen Kopie des Repos
- Erlernen der nötigen Git-Befehle zum Einreichen der Abgaben: `add`, `commit`, `push`, `pull`.

Eine ganze Menge Schritte also, aber keine Sorge: Diese Aufgabe führt Sie präzise hindurch.

[ENDSECTION]
[SECTION::instructions::detailed]

### Installieren von Git

Starten Sie Ihre Kommandozeile (Ihre "Shell").
Probieren Sie das Kommando `git`. Ist es vorhanden? 
Dann ist die Installation schon erledigt und Sie brauchen nichts zu tun.

Andernfalls:

- Auf Windows/WSL und in Debian Linux:  
  `sudo apt-get install git`.
  - Dabei bedeutet `sudo` die Ausführung eines Kommandos mit Administratorrechten.
    Deshalb müssen Sie dafür gelegentlich ihr Passwort eingeben
  - `apt-get` ist der Paketmanager, mit `install` installiert er ein Softwarepaket.
  - `git` ist der Name des gewünschten Pakets; es gibt davon Tausende.
- Auf Mac:  
  `TODO 1`.
  - ...

Hier wie überall im ProPra gilt: Wenn etwas nicht klappt und hier nicht erläutert ist,
führt eine Web-Suche schnell zu den nötigen Informationen. 
Bitte fleißig nutzen -- aber vorher stets _gründlich_ die Aufgabenstellung lesen;
oft stehen sehr wohl alle nötigen Informationen drin.


### Konfigurieren von Git

Damit in den von Ihnen erzeugten Versionen brauchbare Autoreninformation steht, 
müssen Sie bei git hinterlegen, wer Sie sind.
Setzen Sie in folgenden Kommandos Ihre eigenen Daten ein und führen Sie sie aus:

```
git config --global user.name "Myfirstname Mylastname"
git config --global user.email myemail@example.org
```

Git legt diese Information in der Datei `.gitconfig` in Ihrem Homeverzeichnis ab.


### Erstellen des eigenen ProPra-Projekt-git-Repositorys

<replacement id="Git101CreateGitRepoInstructions">
Der Fachbereich betreibt einen eigenen GitLab-Server, auf dem Sie sich nun Ihr ProPra-Repository
anlegen.  
Besuchen Sie https://git.imp.fu-berlin.de/ und melden Sie sich mit Ihren Zedat-Logindaten an.  
Betätigen Sie die Schaltfläche "New Project" und dann "Create blank project".  
Nennen Sie Ihr Projekt möglichst "propra" (als _project name_ und als _project slug_).  
Lassen Sie die Voreinstellungen "Visibility Level: Private" und "Initialize repository with a README"
wie sie sind und lassen Sie den Eintrag für "group or namespace" leer.

Betätigen Sie "Create Project".  
Glückwunsch: Ihr Git Repository existiert nun auf dem GitLab-Server!

Nun werden Sie auf die Seite des Projektes weitergeleitet und können sehen, 
dass GitLab für Sie eine Datei `README.md` angelegt hat.  
Warum heißt das überhaupt Projekt und nicht einfach Repository? 
Weil GitLab noch viele weitere Funktionen rund um ein Repository anbietet,
die eigene Datenbestände haben. Das ganze Bündel heißt Projekt.
</replacement>


### Den Tutor_innen Zugriffsrechte geben

Momentan ist Ihr Repository einzig für Sie änderbar.
Das reicht für die Zwecke des ProPra jedoch nicht aus:
Wenn Sie bei der Tutor_in Aufgaben zur Überprüfung einreichen wollen, 
muss die Tutor_in das Repo auf den eigenen Rechner abrufen können
und nach der Kontrolle eine Datei darin speichern können, die die erfolgreiche
Abgabe bestätigt.

Dafür müssen wir nun auf dem Server dem Repository Lese- und Schreibrechte für 
alle Tutor_innen dieses ProPras zufügen.
Deren Benutzernamen finden Sie in der Datei [course.json](course.json)
im Abschnitt `instructors` jeweils im Eintrag `gitaccount`.

<replacement id="Git101AssignTutorsToGitRepo">
Rufen Sie in GitLab auf Ihrer ProPra-Projektseite im linken Menü den Eintrag
"Settings" auf. Darin den Eintrag "General".  
Nun rechts im Bereich "Visibility, project features, permissions"
(denn die Einstellungen für Permissions (Erlaubnisse), suchen wir ja) die
Schaltfläche "Expand".  
Folgen Sie nun dem Link "project members" (und merken Sie sich vielleicht diese
notorisch schwierig zu findende Stelle).

Nun geht es weiter mit der Schaltfläche "Invite members" oben rechts.
Jetzt können wir (für jede Tutor_in einzeln) die oben als "gitaccount" gesehenen
Benutzernamen angeben und als Rolle jeweils "Developer" auswählen,
was eine Rolle mit (eingschränkten, aber für unseren Zweck ausreichenden)
Schreibrechten ist.
Auslaufdatum geben wir keines an.
</replacement>

Nun können alle zuständigen Tutor_innen bei Bedarf die nötigen Bestätigungen
in Ihr Repo einpflegen.
Wieder ein Schritt geschafft!


### `git clone`: Klonen des Projekts
Jetzt können wir uns darum kümmern das Repo auch auf den lokalen Rechner zu klonen.
Dazu gehen wir auf die Seite unseres Projekts und klicken oben rechts auf den Knopf clone und kopieren die Adresse unter "Clone with HTTPS".
Danach öffnen Sie ein Terminal ihrer Wahl und navigieren in einen Ordner in den Sie das Repo kopieren möchten.
Hier geben wir nun den Befehl git clone mit unserer https Adresse als Parameter ein. Also z.b. `git clone https://git.imp.fu-berlin.de/svnhstr/propra.git`.
Nachdem erfolgreichen klonen sollte nun ein Unterordner mit dem namen unseres Projektes erstellt worden sein.
Es gibt eine wichtige Regel zu befolgen:

[WARNING]
In diesem neuen Ordner befindet sich ein verborgener Unterordner mit dem namen .git, 
dieser darf nicht bearbeitet (erst recht nicht gelöscht) werden,
sonst wird das Repo oft nicht mehr richtig funktionieren.
[ENDWARNING]

Als Nächstes können wir nun in den durch `clone` entstandenen Projektordner navigieren, 
um unsere erste Änderung anzulegen und danach zum Server hochzuladen.


### `git status`, `git add`, `git commit`: Änderungen am Projekt speichern

Bearbeiten Sie die Readme.md folgendermaßen.

- Löschen Sie den existierenden Inhalt
- Fügen Sie eine Überschrift "Programmierpraktikum" hinzu
- Notieren Sie darunter ihren Namen und den Namen ihres Tutors

Hinweise zum formattieren von Markdown-Dateien finden sie hier: https://about.gitlab.com/handbook/markdown-guide/

Nachdem die Änderungen vorgenommen wurden müssen wir git noch mitteilen, dass diese nun im aktuellen Zustand gespeichert werden sollten.
Dazu nutzen wir den Befehl `git commit`. Damit der Befehl weiß welche Dateien "commitet" werden sollen müssen wir diese noch hinzufügen.
Das können wir mithilfe von `git add`. Zwar gibt es auch einen Parameter welcher *alle* veränderten oder neu erstellten Dateien hinzufügt, jedoch wird ist es sog. "best-practice" die Dateien explizit zu bennen, so können sie schlicht den Pfad und Namen der Datein anhängen. 
In unserem Fall also: `git add Readme.md` (Nutzen Sie automatische Vervollständigung mithilfe der Tab-Taste).
Nachdem nun also die Datei zu unserem aktuellen commit-Zustand hinzugefügt wurde müssen wir diesen noch festhalten. Damit wir auch wissen *was* dort eigentlich festgehalten wurde können wir auch eine kurze (72 Zeichen) lange Nachricht anhängen. Z.b. "modified Readme.md" oder "Readme.md bearbeitet".
Das können wir mithilfe des flags `-m`, der gesamte Befehl würde dann so aussehen `git commit -m "Readme.md bearbeitet"`.
Zu guter letzt müssen wir diese Änderungen noch zum Gitlab server schicken, dazu nutzen wir ganz einfach den Befehl `git push`, ohne flags, parameter oder sonstige Zusätze. Git wird sie nun nach ihren Zugangsdaten fragen, nachdem Sie diese eingegeben haben sollte unser commit unserem GitLab-Projekt hinzugefügt worden und nach einem Neuladen der Seite sichtbar sein.

### `git push`: Neue Commits zum Server hochladen

[HINT::Hinweis zur Praktikabilität]
  `git push` kann einem auf die Dauer ganz schön auf die Nerven gehen, wenn man keinen
  `ssh-agent` laufen hat. Den richten wir später ein, in [TAL::GitSshAgent].
[ENDHINT]

### `git log`: Commit-Historie ansehen

### `git pull`: Neue Commits vom Server herunterladen

Manchmal ist es auch umgekehrt: Es gibt auf dem Server neue Commits, die lokal noch nicht vorhanden sind.
Das passiert hier im ProPra in zwei Fällen:

- Sie arbeiten abwechselnd auf mehreren Rechnern, die jeder eine lokale Kopie des Repositorys haben.
- Sie haben Aufgaben bei der Tutor_in eingereicht und diese einen Akzeptanz-Commit zugefügt
  und zum Server hochgeladen.

!!!

[ENDSECTION]
[SECTION::submission::trace]

Ihre Abgabe ist schon fertig, Sie brauchen nichts zu tun:
Kontrolliert wird nur, ob Ihre bisherigen Commits aus aussehen, wie sie sollen.

[INSTRUCTOR::Name, Email, Commit-Nachricht]
Nur prüfen, ob der Commit ungefähr wie gewünscht aussieht.
[ENDINSTRUCTOR]

[ENDSECTION]
